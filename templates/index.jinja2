{# somehow jinja ignores this! It works with ansible
TODO: Needs debugging
#jinja2: trim_blocks: True
#jinja2: lstrip_blocks: True
#}
<!DOCTYPE html>
<html>
<head>
    <title>IPv6.watch</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <style type="text/css">
    #twitter-logo {
        color: #00aced;
    }
    #github-logo {
        color: #333;
    }

    a {
        text-decoration: underline;
    }

    .minheight {
        min-height: 40px;
    }

    /* .test-result-no-ipv6 {
        background-color: hsla(0, 100%, 62%, 0.6);
    }

    .test-result-partial-ipv6 {
        background-color: hsla(39, 100%, 50%, 0.75);
    }

    .test-result-full-ipv6 {
        background-color: hsla(135, 87%, 46%, 1);
    } */

    .target-link {
        color: black;
    }

    </style>
</head>
<body>
<div class="container">
    <div class="row">
        <h1><a href="/">ipv6.watch</a></h1>
    </div>
    <div class="row">
        <p>
            It is {{ long_date }} and the IPv6 adoption at major websites is bad... Most of those websites
            have the money, time and people to enable IPv6 but still they are only reachable via IPv4....
        </p>
        <p>
            Are you trying to disable IPv6 on your system or network? <a href="http://howtodisableipv6.com/">Click here</a> to learn more.
        </p>
    </div>


    {% for category in categories|sort %}
        <div class="row">
            <div class="col-12"><h2>{{ category }}</h2></div>
        </div>

        {% for target, result in results | sort %}
        {% set tt = targets[target] %}

            {% if tt.categories is defined and category in tt.categories %}
            <div class="row align-middle rounded mt alert {% if result['summary']=='all' %}alert-success{% elif result['summary']=='some' %}alert-warning{% else %}alert-danger{% endif %}">
                {# Print icon. Either a FontAwesome one, an image or noting #}
                <div class="col-1 minheight text-left">
                    {% if 'icon' in tt %}
                        {% if tt['icon'].startswith('fa:') %}
                            <i class="fab fa-{{ tt['icon'][3:] }} fa-3x"></i>
                        {% else %}
                            <img style="max-height: 40px; max-width: 64px;" src="{{ tt['icon'] }}">
                        {% endif %}
                    {% endif %}
                </div>

                {# Print target name #}
                <div class="col-2 minheight text-left">
                    <a href="{{ tt['href'] }}" class="target-link" rel="nofollow" target="_blank">
                        {{ target }}
                    </a>
                </div>

                {# Print target status #}
                <div class="col-7 minheight text-left">
                    {% if result['summary'] == 'all' %}
                        Yay! IPv6 is supported!
                    {% elif result['summary'] == 'some' %}
                        Well, there is some IPv6 support. Can't you do better?
                    {% else %}
                        Nope. <strong>SHAME</strong> on you!
                    {% endif %}
                </div>

                {# Tell them on social media #}
                <div class="col-2 minheight text-right">
                    {% if tt['twitter'] %}
                        <a target="_blank"
                           href="http://twitter.com/home/?status={{ ( messages['twitter'][result['summary']] % ( tt['twitter'] ) ) | urlencode }}">
                            <i class="fab fa-twitter" aria-hidden="true"></i>
                            Twitter
                        </a>
                    {% endif %}
                </div>
            </div>
            {% endif %}
        {% endfor %}
    {% endfor %}

    <hr/>
    <div class="row">
        <p>
            This page is regenerated every minute. Last update was at {{ date }} (UTC)
        </p>
        <p class="text-right">
            <a href="https://github.com/andir/ipv6.watch" title="GitHub" target="_blank">
                <i class="fab fa-github fa-3x" id="github-logo"></i>
            </a>
            <a href="https://twitter.com/ipv6watch" title="Twitter" target="_blank">
                <i class="fab fa-twitter fa-3x" id="twitter-logo"></i>
            </a>
        </p>
    </div>
</div>

</body>
</html>
